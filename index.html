<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.5/dist/aframe-particle-system-component.min.js"></script>
    <!--script src="aframe-physics-system.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v3.0.2/dist/aframe-physics-system.min.js"></script-->
    <script src="https://unpkg.com/super-hands@2.0.1/dist/super-hands.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <img id="grid" src="https://img.gs/bbdkhfbzkk/stretch/https://i.imgur.com/25P1geh.png" crossorigin="anonymous"/>
        <img id="sky" src="https://img.gs/bbdkhfbzkk/2048x2048,stretch/http://i.imgur.com/WqlqEkq.jpg" crossorigin="anonymous" />
      </a-assets>
     
      <a-entity id="avatar" position="0 1.6 0" progressive-controls 
                sound="src: url(https://cdn.glitch.com/b9da6fb8-cabc-43cb-b601-fbf2a90bdc29%2Fjump.ogg?1521133485527); autoplay: false; on: jump" >
        <a-camera>
          <a-entity raycaster></a-entity>
        </a-camera>

        <!-- Jump up and fall down-->
        <a-animation begin="jump" attribute="position" dur="200" to="0 5 0" easing="linear"></a-animation>
        <a-animation begin="jump" attribute="position" dur="200" from="0 5 0" to="0 1.3 0" easing="linear" delay="300"></a-animation>            

        <!-- Controllers -->
        <a-entity class="right-controller" super-hands></a-entity>
        <a-entity class="left-controller" super-hands></a-entity>
      </a-entity>

      <a-sphere id="ball" grabbable dynamic-body="shape: sphere; mass: 100;" position="0 1 -1"
                sound="src: url(https://cdn.glitch.com/ed38cda4-8b9e-460f-83fa-3c9f7ed0bf7e%2Fsfx_throw.wav?1521187676351); autoplay: false; on: throwBall">
        <a-animation begin="drop" attribute="position" dur="500" to="0 0 0" easing="linear"></a-animation>            
      </a-sphere>
      
      <!-- Environment -->
      
      <!-- Ground -->
      <a-entity static-body
        geometry="primitive: box; width: 100; height: 0.5; depth: 100" position="0 -0.25 0"
        material="src: #grid; repeat: 100 100; transparent: true; metalness:0.6; roughness: 0.4; sphericalEnvMap: #sky;"></a-entity>

      <!-- Lights -->
      <a-entity light="type: directional; color: #00d2ff; target: #turquoiseTarget; groundColor: #00d2ff" position="0 -1 0">
        <a-entity id="turquoiseTarget" position="0 1 0"></a-entity>
      </a-entity>
      <a-entity light="type: directional; color: #d200d2; target: #pinkTarget" position="0 1 0">
        <a-entity id="pinkTarget" position="0 -1 0"></a-entity>
      </a-entity>
      <a-entity light="type:ambient; color: #333"></a-entity>
      
      <!-- Sky and snow -->
      <a-sky src="#sky" rotation="0 0 0"></a-sky>
      <a-entity id="particles" particle-system="preset: snow"></a-entity>
    </a-scene>

    <script>
      // On mobile remove elements that are resource heavy
      var isMobile = AFRAME.utils.device.isMobile();

      if (isMobile) {
        var particles = document.getElementById('particles');
        particles.parentNode.removeChild(particles);
      }
    </script>
    <script src="/script.js"></script>
  </body>
</html>
